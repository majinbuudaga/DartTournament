<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tournament Bracket with Lines</title>
  <style>
    * {
      box-sizing: border-box;
    }

    body {
      font-family: sans-serif;
      margin: 0;
      padding: 20px;
      background: #f5f5f5;
    }

    h1 {
      text-align: center;
      margin-bottom: 30px;
    }

    #bracket-container {
      display: flex;
      position: relative;
      justify-content: center;
      overflow-x: auto;
    }

    .round {
      display: flex;
      flex-direction: column;
      align-items: center;
      margin: 0 20px;
    }

    .match {
      position: relative;
      background: white;
      border: 1px solid #ccc;
      border-radius: 6px;
      margin: 30px 0;
      padding: 6px 12px;
      min-width: 140px;
      text-align: center;
      box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }

    .team {
      cursor: pointer;
      padding: 4px;
      border-radius: 4px;
    }

    .team:hover {
      background: #eee;
    }

    .winner {
      background-color: #c6efce !important;
      font-weight: bold;
    }

    .champion {
      background-color: gold !important;
      font-weight: bold;
      color: black;
    }

    svg.connector {
      position: absolute;
      top: 0;
      left: 0;
      overflow: visible;
      pointer-events: none;
    }

    button {
      display: block;
      margin: 30px auto 10px;
      padding: 10px 20px;
      font-size: 16px;
      border-radius: 6px;
      border: none;
      background-color: #4CAF50;
      color: white;
      cursor: pointer;
    }

    button:hover {
      background-color: #45a049;
    }
  </style>
</head>
<body>

<h1>üèÜ Tournament Bracket</h1>
<div id="bracket-container"></div>
<button onclick="resetBracket()">üîÑ Reset Bracket</button>

<script>
const TEAMS = [
  "Team A", "Team B", "Team C", "Team D",
  "Team E", "Team F", "Team G", "Team H",
  "Team I", "Team J", "Team K", "Team L",
  "Team M", "Team N", "Team O", "Team P"
];

let rounds = [];

function createBracket(teams) {
  const r1 = [];
  for (let i = 0; i < teams.length; i += 2) {
    r1.push([teams[i], teams[i + 1]]);
  }
  rounds = [r1];

  // Build empty rounds
  let numMatches = r1.length / 2;
  while (numMatches >= 1) {
    rounds.push(new Array(numMatches).fill([null, null]));
    numMatches /= 2;
  }

  drawBracket();
}

function drawBracket() {
  const container = document.getElementById("bracket-container");
  container.innerHTML = "";
  const matchRefs = [];

  const maxMatches = Math.max(...rounds.map(r => r.length));

  rounds.forEach((round, rIdx) => {
    const roundDiv = document.createElement("div");
    roundDiv.className = "round";

    const totalHeight = maxMatches * 150; // arbitrary total height
    const matchHeight = 70; // approx match height
    const spacing = (totalHeight - (round.length * matchHeight)) / (round.length + 1);

    matchRefs[rIdx] = [];

    round.forEach((match, mIdx) => {
      const matchDiv = document.createElement("div");
      matchDiv.className = "match";
      matchDiv.style.marginTop = `${spacing}px`;

      match.forEach((team, tIdx) => {
        const teamDiv = document.createElement("div");
        teamDiv.className = "team";
        teamDiv.innerHTML = team ? team : "<em>?</em>";
        if (team) {
          teamDiv.onclick = () => handleWinner(rIdx, mIdx, tIdx);
        }
        matchDiv.appendChild(teamDiv);
      });

      roundDiv.appendChild(matchDiv);
      matchRefs[rIdx].push(matchDiv);
    });

    container.appendChild(roundDiv);
  });

  drawLines(matchRefs);
}

function resetBracket() {
  createBracket(TEAMS);
}

// Initial render
createBracket(TEAMS);
</script>

</body>
</html>
